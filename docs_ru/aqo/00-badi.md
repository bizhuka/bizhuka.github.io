---
parent: "AQO - настройки"
title: "BADI на основе AQO"
nav_order: 04
permalink: /ru/aqo/badi-04/
---

### BADI на основе AQO
{: .no_toc }

Часто бывает так что стандартная BADI не поддерживает создание множества инстанций.

Или же нужно создать несколько независимых друг от друга имплементаций, которые вызываются по определённому условию (к примеру, по БЕ) или же подряд.

Конечно, можно создать собственную BADI, но это бывает не очень удобно делать. И это не так быстро, как предложенное ниже решение.

### Описание интерфейса

Предположим, у нас есть интерфейс с методом **SOME_METHOD** без аргументов. И две реализации ZCL_AQO_BADI_TEST_01 и ZCL_AQO_BADI_TEST_02 которые просто выводят произвольное сообщение.

![image](https://github.com/bizhuka/bizhuka.github.io/assets/36256417/20408dd8-12cc-49e7-b46c-018b63fef6ca)

---

### Новый метод

Теперь в дополнение методу **CREATE** который создавал обычную настройку на основе READ-ONLY атрибутов класса, добавлен метод **FIND_BADI** который работает подобно **GET BADI** с фильтром.

![image](https://github.com/bizhuka/bizhuka.github.io/assets/36256417/b9632a9f-5409-4251-8293-337133b97dd1)

Давайте взглянем на пример вызова нового метода SE38->**ZAQO_BADI**

![image](https://github.com/bizhuka/bizhuka.github.io/assets/36256417/e1fd86ac-3c2a-4be2-8cd3-042e2dc9b7b9)

То есть мы передаем фильтр (БЕ = 0001) и название интерфейса и получаем таблицу со всеми подходящими реализациями. Их может быть несколько, одна или же вообще ни одной.

### Интерфейс

После создания настройки давайте запустим транзакцию **ZAQO** и посмотрим что у нас получилось

![image](https://github.com/bizhuka/bizhuka.github.io/assets/36256417/53043c70-f671-4f5f-9362-57f8dbe6e3e4)

Визуально отображается другая иконка, которая подчеркивает, что это не обычная настройка.

**OPTION_ID** равен названию интерфейса.

**PACKAGE** равен пакету, в котором сохранен интерфейс.

Внесем следующие значения

![image](https://github.com/bizhuka/bizhuka.github.io/assets/36256417/889682cd-1563-4aee-bc13-f22aa8670c69)

Обратите внимание что:

* Средство поиска показывает все имплементации данного интерфейса

* Если над каждой конкретной реализацией работают различные люди можно деактивировать вызов без удаления строки на время теста

* Один и тот же класс ZCL_AQO_BADI_TEST_01 может встречаться в настройке несколько раз, но в **et_badi[]** будет лишь 1 экземпляр этого класса

### Результат вызова

В нашем примере в таблице **lt_badi[]** будет один экземпляр класс ZCL_AQO_BADI_TEST_01 и будет  показоно сообщение **Class 01** один раз.

![image](https://github.com/bizhuka/bizhuka.github.io/assets/36256417/7bbaec51-6a01-4d42-977c-16b9aa6fc893)

### Журнал использования

Журнал использования, а также прочие вкладки Транспорт, Общая информация и Вложения (для документации) остались на своих местах

Сканер кода покажет все места вызова данного интерфейса. При повторном вызове метода **FIND_BADI** создастся лишь 1 экземпляр класса ZCL_AQO_BADI_TEST_01.

![image](https://github.com/bizhuka/bizhuka.github.io/assets/36256417/ef9f068b-6d1c-4ec6-bd62-fecdba1a0b6e)