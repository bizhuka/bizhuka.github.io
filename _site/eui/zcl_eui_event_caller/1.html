<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="shortcut icon" href="http://localhost:4000/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="http://localhost:4000/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2709176-10"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2709176-10', { 'anonymize_ip': true }); </script> <script type="text/javascript" src="http://localhost:4000/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="http://localhost:4000/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><meta data-rh="true" property="al:android:bm_git_app" content="Medium" /><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"> <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script> <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"> <script> (function() { var d = document, s = d.createElement('script'); s.src = 'https://github-io-17.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"> All libraries </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a><nav class="lang-sel"><ul><li class="lang"> <a href="/eui/zcl_eui_event_caller/1" class="enabled">En </a>|<a href="/ru/eui/zcl_eui_event_caller/1"> Ru</a></ul></nav></div><nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/" class="nav-list-link">Home</a><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/eui/" class="nav-list-link">EUI - user interface</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/eui/zcl_eui_alv/1" class="nav-list-link">ALV manager</a><li class="nav-list-item active"><a href="http://localhost:4000/eui/zcl_eui_event_caller/1" class="nav-list-link active">EVENT caller</a><li class="nav-list-item "><a href="http://localhost:4000/eui/zcl_eui_file/1" class="nav-list-link">FILE Basic file operations</a><li class="nav-list-item "><a href="http://localhost:4000/eui/zcl_eui_file_io/1" class="nav-list-link">FILE_IO Import/Export to Excel/CSV</a><li class="nav-list-item "><a href="http://localhost:4000/eui/zcl_eui_menu/1" class="nav-list-link">MENU Gos based menu</a><li class="nav-list-item "><a href="http://localhost:4000/eui/zcl_eui_screen/1" class="nav-list-link">SCREEN manager</a><li class="nav-list-item "><a href="http://localhost:4000/eui/zcl_eui_logger/1" class="nav-list-link">Logger</a></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/xtt/" class="nav-list-link">XTT - reports</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/xtt/compare/" class="nav-list-link">Compare with other libraries</a><li class="nav-list-item "><a href="http://localhost:4000/xtt/installation-guide/" class="nav-list-link">Installation guide</a><li class="nav-list-item "><a href="http://localhost:4000/xtt/simple-structure/" class="nav-list-link">010 Simple structure</a><li class="nav-list-item "><a href="http://localhost:4000/xtt/basic-tables/" class="nav-list-link">020 Basic tables</a><li class="nav-list-item "><a href="http://localhost:4000/xtt/excel-formula/" class="nav-list-link">021 Formulas in Excel</a><li class="nav-list-item "><a href="http://localhost:4000/xtt/nested-blocks/" class="nav-list-link">030 Nested blocks</a><li class="nav-list-item "><a href="http://localhost:4000/xtt/data-types/" class="nav-list-link">040 Data types & Excel post processing</a><li class="nav-list-item "><a href="http://localhost:4000/xtt/tree-group-by-fields/" class="nav-list-link">050 Tree (group by fields)</a><li class="nav-list-item "><a href="http://localhost:4000/xtt/tree-output-level-by-condition/" class="nav-list-link">051 Output level by condition</a><li class="nav-list-item "><a href="http://localhost:4000/xtt/tree-aggregation-functions/" class="nav-list-link">052 Aggregation functions</a><li class="nav-list-item "><a href="http://localhost:4000/xtt/tree-group-by-field-relations/" class="nav-list-link">060 Tree (group by field relations)</a><li class="nav-list-item "><a href="http://localhost:4000/xtt/macro/" class="nav-list-link">070 Macro call & prepare_raw event</a><li class="nav-list-item "><a href="http://localhost:4000/xtt/output-direction/" class="nav-list-link">080 ;direction=column addition</a><li class="nav-list-item "><a href="http://localhost:4000/xtt/dynamic-table/" class="nav-list-link">090 Dynamic table (tree)</a><li class="nav-list-item "><a href="http://localhost:4000/xtt/images/" class="nav-list-link">100 Images</a><li class="nav-list-item "><a href="http://localhost:4000/xtt/images-no-code/" class="nav-list-link">110 Images ';type=image'</a><li class="nav-list-item "><a href="http://localhost:4000/xtt/class-attributes/" class="nav-list-link">120 Class attributes</a><li class="nav-list-item "><a href="http://localhost:4000/xtt/cond/" class="nav-list-link">130 Addition ';cond='</a><li class="nav-list-item "><a href="http://localhost:4000/xtt/block/" class="nav-list-link">140 Blocks by condition</a></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/aqo/" class="nav-list-link">AQO - options</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/aqo/se38-zaqo_test/" class="nav-list-link">Structure based options</a><li class="nav-list-item "><a href="http://localhost:4000/aqo/se24-zcl_aqo_tester/" class="nav-list-link">Class based options</a><li class="nav-list-item "><a href="http://localhost:4000/aqo/installation-guide/" class="nav-list-link">Installation guide</a><li class="nav-list-item "><a href="http://localhost:4000/aqo/field-catalog/" class="nav-list-link">Field catalog and other table settings</a><li class="nav-list-item "><a href="http://localhost:4000/aqo/which-transaction-to-choose/" class="nav-list-link">01 Which transaction to choose</a><li class="nav-list-item "><a href="http://localhost:4000/aqo/search-abap-code/" class="nav-list-link">02 Search abap code</a><li class="nav-list-item "><a href="http://localhost:4000/aqo/extensions/" class="nav-list-link">03 Extensions</a><li class="nav-list-item "><a href="http://localhost:4000/aqo/complex-data-types/" class="nav-list-link">04 Complex data types</a><li class="nav-list-item "><a href="http://localhost:4000/aqo/export-and-import-data/" class="nav-list-link">05 Export and import data</a><li class="nav-list-item "><a href="http://localhost:4000/aqo/create-option-via-interface/" class="nav-list-link">06 Create option via interface</a><li class="nav-list-item "><a href="http://localhost:4000/aqo/search-help-in-ui5/" class="nav-list-link">07 Search help in ui5</a><li class="nav-list-item "><a href="http://localhost:4000/aqo/changing-fields-descriptions/" class="nav-list-link">08 Changing fields descriptions</a><li class="nav-list-item "><a href="http://localhost:4000/aqo/interface-description/" class="nav-list-link">09 Interface description</a><li class="nav-list-item "><a href="http://localhost:4000/aqo/oaor/" class="nav-list-link">10 OAOR</a></ul></ul></nav><footer class="site-footer"><section id="lab_social_icon_footer" class="text-small text-grey-dk-000 mb-0"><div class="container"><div class="center-block"> <a href="mailto:modekz@gmail.com"><i id="social-em" class="fa fa-envelope-square social fa-2x"></i></a> <a href="https://t.me/modekz"><i id="social-tg" class="fa fa-telegram social fa-2x" ></i></a> <a href="https://github.com/bizhuka"><i id="social-gh" class="fa fa-github-square social fa-2x"></i></a></div></div></section></footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search All libraries" aria-label="Search All libraries" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="//github.com/bizhuka/" class="site-button" > on GitHub </a></ul></nav></div><div id="main-content-wrap" class="main-content-wrap"><nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/eui/">EUI - user interface</a><li class="breadcrumb-nav-list-item"><span>EVENT caller</span></ol></nav><div id="main-content" class="main-content" role="main"><nav id="nav-sidebar" class="hidden-print hidden-xs hidden-sm affix bs-docs-sidebar"><ul id="sidebar" class="nav nav-stacked"><li class="toc_li"><a href="#loose-coupling-through-handlers">Loose coupling through handlers</a><li class="toc_li"><a href="#zcl_eui_event_caller">ZCL_EUI_EVENT_CALLER</a><li class="toc_li"><a href="#implementation">Implementation</a><li class="toc_li"><a href="#example-in-tr-se38">Example in tr. SE38</a></ul></nav><article><h3 id="loose-coupling-through-handlers"> <a href="#loose-coupling-through-handlers" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Loose coupling through handlers</h3><p>   Sometimes OOP can complicate the program structure quite a lot. <br /> If you do not go into the jungle of design, inheritance, design patterns, lambda expressions and other smart and complex things, often you just need to <strong>call the method</strong>, which <strong>is implemented</strong> in a completely different place, thereby splitting the code into smaller parts that are not tightly coupled.<br /> To do this, ABAP has two main mechanisms for weakly binding classes to each other <strong>interfaces</strong> and <strong>events</strong>. <br /> But how not to complicate your life with inheritance and interfaces and other OOP goodies?</p><p><img src="https://user-images.githubusercontent.com/36256417/81942205-45ee1f80-9613-11ea-9f95-209d1db5a2df.png" alt="image" /></p><p><br /> <br /> <br /></p><hr /><p>    Interfaces are a very flexible tool for breaking code into logical blocks, which allows you to make code less connected, unlike classes. <br /> But their implementation in ABAP, in terms of writing code, is quite verbose and not always convenient. Also, the fact that you need to implement each method in the interface (unless it is a testing class) introduces additional restrictions on their use.</p><p>For example, if you have an interface for managing <a href="../zcl_eui_screen/1">screens</a>, you need to implement both <strong>PAI</strong> and <strong>PBO</strong> methods. <br /> If you do not need a PBO, you make it empty and then write to ATC that it is needed (so-so pleasure)</p><p>Then for flexibility you can declare them events</p><p><img src="https://user-images.githubusercontent.com/36256417/81945943-2f969280-9618-11ea-88c9-b2c4abc0c379.png" alt="image" /></p><p>And do something like</p><div class="language-abap highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">" Send container &amp; current screen number</span>
    <span class="k">RAISE</span> <span class="k">EVENT</span> <span class="n">zif_eui_manager</span><span class="o">~</span><span class="n">pbo_event</span>
     <span class="k">EXPORTING</span>
       <span class="n">io_container</span> <span class="o">=</span> <span class="n">io_container</span>
       <span class="n">iv_dynnr</span> <span class="o">=</span> <span class="n">sy</span><span class="o">-</span><span class="n">dynnr</span><span class="p">.</span>
<span class="p">...</span>

    <span class="c1">" Handler returns cv_close = 'X' to close SCREEN</span>
    <span class="k">RAISE</span> <span class="k">EVENT</span> <span class="n">zif_eui_manager</span><span class="o">~</span><span class="n">pai_event</span>
     <span class="k">EXPORTING</span>
       <span class="n">iv_command</span> <span class="o">=</span> <span class="n">sy</span><span class="o">-</span><span class="n">ucomm</span>
       <span class="n">cv_close</span> <span class="o">=</span> <span class="k">REF</span> <span class="o">#</span><span class="p">(</span> <span class="n">lv_close</span> <span class="p">).</span>
</code></pre></div></div><p>But what if you need to trigger an event of another class?<br /> For example, make an event call from a local class (Class relevant to local definitions) when it implements part of the logic of a global class. <br /> <strong>RAISE EVENT</strong> can only be called in its own class.</p><p>Or for example, if you have a wrapper on <a href="../zcl_eui_alv/1">ALV</a> and you want to <strong>forward</strong> the event from CL_GUI_ALV_GRID to another place, then catch for example <strong>on_double_click</strong>, and then delegate execution to another class.</p><hr /><h3 id="zcl_eui_event_caller"> <a href="#zcl_eui_event_caller" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ZCL_EUI_EVENT_CALLER</h3><p>   One simple solution is to call the event handler method via dynamic call. <br /> Those handler descriptions can be presented as an interface with a method that can be called via CALL METHOD with <strong>PARAMETER-TABLE</strong>.</p><p>When the code contains a description of the called method, we can call it dynamically by knowing its signature</p><div class="language-abap highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      <span class="n">on_hotspot_click</span> <span class="k">FOR</span> <span class="k">EVENT</span> <span class="n">hotspot_click</span> <span class="k">OF</span> <span class="n">cl_gui_alv_grid</span>
        <span class="k">IMPORTING</span>
            <span class="n">sender</span>
            <span class="n">e_row_id</span>
            <span class="n">e_column_id</span><span class="p">,</span>
</code></pre></div></div><h3 id="implementation"> <a href="#implementation" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Implementation</h3><p>First you need to know what method you need to call</p><p><img src="https://user-images.githubusercontent.com/36256417/81949867-bd747c80-961c-11ea-86fe-32f5f6c5ca7a.png" alt="image" /></p><ul><li>IO_HANDLER - An object whose method needs to be called<li>IV_HANDLERS_MAP - If you have several on_double_click handlers for different ALVs, you need to specify the method name<li>IV_FIRST - Call first? RAISE EVENT does not guarantee call order<li>IV_ACTIVATE - Activate / Deactivate</ul><p><br /> <br /> <br /></p><p>And then it remains just to call the event handlers using <strong>CALL_HANDLERS</strong></p><p><img src="https://user-images.githubusercontent.com/36256417/81950696-ba2dc080-961d-11ea-9895-acc26a3f971b.png" alt="image" /></p><p>Instead of such code</p><div class="language-abap highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">" Handler returns cv_close = 'X' to close SCREEN</span>
    <span class="k">RAISE</span> <span class="k">EVENT</span> <span class="n">zif_eui_manager</span><span class="o">~</span><span class="n">pai_event</span>
     <span class="k">EXPORTING</span>
       <span class="n">iv_command</span> <span class="o">=</span> <span class="n">sy</span><span class="o">-</span><span class="n">ucomm</span>
       <span class="n">cv_close</span> <span class="o">=</span> <span class="k">REF</span> <span class="o">#</span><span class="p">(</span> <span class="n">lv_close</span> <span class="p">).</span>
</code></pre></div></div><p>We call handlers like this</p><div class="language-abap highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">mo_event_caller</span><span class="o">-&gt;</span><span class="n">call_handlers</span><span class="p">(</span>
     <span class="n">iv_of_class</span>     <span class="o">=</span> <span class="s1">'ZIF_EUI_MANAGER'</span>
     <span class="n">iv_for_event</span>    <span class="o">=</span> <span class="s1">'PAI_EVENT'</span>
     <span class="n">iv_param_nam_00</span> <span class="o">=</span> <span class="s1">'SENDER'</span>          <span class="n">iv_param_val_00</span> <span class="o">=</span> <span class="n">me</span>
     <span class="n">iv_param_nam_01</span> <span class="o">=</span> <span class="s1">'IV_COMMAND'</span>      <span class="n">iv_param_val_01</span> <span class="o">=</span> <span class="n">iv_command</span>
     <span class="n">iv_param_nam_02</span> <span class="o">=</span> <span class="s1">'CV_CLOSE'</span>        <span class="n">iv_param_val_02</span> <span class="o">=</span> <span class="n">lr_close</span> <span class="p">).</span>
</code></pre></div></div><p>We delegate on_double_click like this</p><div class="language-abap highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">mo_eui_alv</span><span class="o">-&gt;</span><span class="n">mo_event_caller</span><span class="o">-&gt;</span><span class="n">call_handlers</span><span class="p">(</span>
     <span class="n">iv_of_class</span>     <span class="o">=</span> <span class="s1">'CL_GUI_ALV_GRID'</span>
     <span class="n">iv_for_event</span>    <span class="o">=</span> <span class="s1">'DOUBLE_CLICK'</span>
     <span class="n">iv_param_nam_00</span> <span class="o">=</span> <span class="s1">'SENDER'</span>          <span class="n">iv_param_val_00</span> <span class="o">=</span> <span class="n">sender</span>
     <span class="n">iv_param_nam_01</span> <span class="o">=</span> <span class="s1">'E_ROW'</span>           <span class="n">iv_param_val_01</span> <span class="o">=</span> <span class="n">e_row</span>
     <span class="n">iv_param_nam_02</span> <span class="o">=</span> <span class="s1">'E_COLUMN'</span>        <span class="n">iv_param_val_02</span> <span class="o">=</span> <span class="n">e_column</span> <span class="p">).</span>
</code></pre></div></div><hr /><p>If you read up to here and understood the main idea, I shake your hand at a distance</p><p>As a result, you can install handlers (or callback methods) through 1 parameter <strong>io_handler</strong> which has a description of all the necessary handlers</p><p>For <strong>PAI_EVENT</strong> interface ZIF_EUI_MANAGER</p><div class="language-abap highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">" Handle of PAI_EVENT</span>
 <span class="k">CHECK</span> <span class="n">mo_screen</span><span class="o">-&gt;</span><span class="n">show</span><span class="p">(</span> <span class="n">io_handler</span> <span class="o">=</span> <span class="n">me</span> <span class="p">)</span> <span class="o">=</span> <span class="s1">'OK'</span><span class="p">.</span>
</code></pre></div></div><p>For <strong>ON_USER_COMMAND</strong> class CL_GUI_ALV_GRID</p><div class="language-abap highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">" Instead of set handler</span>
    <span class="n">lo_eui_alv</span><span class="o">-&gt;</span><span class="n">show</span><span class="p">(</span>
     <span class="n">io_handler</span>        <span class="o">=</span> <span class="n">me</span>

     <span class="c1">" If omit map with all (Could be several ON_USER_COMMAND)</span>
     <span class="n">iv_handlers_map</span>   <span class="o">=</span> <span class="s1">'ON_HOTSPOT_CLICK;ON_USER_COMMAND;ON_PBO_EVENT'</span>
    <span class="p">).</span>
</code></pre></div></div><hr /><h3 id="example-in-tr-se38"> <a href="#example-in-tr-se38" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example in tr. SE38</h3><ul><li>ZEUI_TEST_ALV<li>ZEUI_TEST_SCREEN_02</ul></article><hr><footer><p><a href="#top" id="back-to-top">Back to top</a></p><div class="d-flex mt-2"><p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/bizhuka/bizhuka.github.io/tree/master/docs/eui/ZCL_EUI_EVENT_CALLER.md" id="edit-this-page">Page on GitHub</a></p></div></footer></div></div><div class="search-overlay"></div><div id="disqus_thread"></div></div>
